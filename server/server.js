const express = require('express');
const app = express();
const port = process.env.PORT || 5000;
const path = require('path');

const menuData = [
  {
    category: "Appetizers",
    items: [
      { name: "Bruschetta", description: "Toasted bread with tomatoes and basil", price: 8.99 },
      { name: "Calamari", description: "Fried squid with marinara sauce", price: 12.99 }
    ]
  },
  {
    category: "Main Courses",
    items: [
      { name: "Steak", description: "Grilled steak with potatoes and vegetables", price: 24.99 },
      { name: "Pasta Carbonara", description: "Spaghetti with egg, cheese, and bacon", price: 16.99 }
    ]
  },
  {
    category: "Desserts",
    items: [
      { name: "Tiramisu", description: "Coffee-flavored Italian dessert", price: 7.99 },
      { name: "Chocolate Cake", description: "Rich chocolate cake with frosting", price: 6.99 }
    ]
  }
];

app.use(express.static(path.join(__dirname, '../client/build')));

app.get('/api/menu', (req, res) => {
  res.json(menuData);
});

app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, '../client/build/index.html'));
});

app.listen(port, () => {
  console.log(`Server is running on port ${port}`);
});